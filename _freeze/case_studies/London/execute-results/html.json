{
  "hash": "4e565ad6f796c99e634941f72d7f898b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Visualizing population density across London boroughs\"\nauthor: \"Christian Rohrbeck\"\ndate: \"02/04/2025\"\nformat: html\n---\n\n\n\n## Load the data and shapefile\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(sf)\n\nLondon <- read_sf(\"data/shapefiles/London.shp\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(London)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"NAME\"       \"GSS_CODE\"   \"HECTARES\"   \"NONLD_AREA\" \"ONS_INNER\" \n[6] \"SUB_2009\"   \"SUB_2006\"   \"geometry\"  \n```\n\n\n:::\n:::\n\n\n## Explroe the data structure\n\nThe following illustrates that the shapefile comes with a data frame\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass( London )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"sf\"         \"tbl_df\"     \"tbl\"        \"data.frame\"\n```\n\n\n:::\n:::\n\n\n## Load and clean the population data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nLondon_population <- read.csv(\"data/shapefiles/London.csv\")\nLondon_population <- London_population %>% \n  mutate( Population = as.numeric( gsub(\"\\\\,\",\"\",Population) ) )\n```\n:::\n\n\n## Merge data sets and calculate density\n\n\n::: {.cell}\n\n```{.r .cell-code}\nLondon <- inner_join( x=London, y=London_population, by=c(\"NAME\"=\"Borough\") )\nLondon <- London %>% mutate( Density = Population / HECTARES )\n```\n:::\n\n\n\n## Visualzation 1: Colour as visual cue\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot( data=London, aes(fill=Density) ) + geom_sf() + theme_bw() +\n  scale_fill_distiller( palette=\"Reds\", trans=\"reverse\" ) + \n  theme( axis.title=element_text(size=15), axis.text=element_text(size=15) ) + \n  labs( x=\"Longitude\", y=\"Latitude\" )\n```\n\n::: {.cell-output-display}\n![](London_files/figure-html/unnamed-chunk-6-1.png){fig-align='center' width=50%}\n:::\n:::\n\n\n## Visualzation 2: Size of points as visual cue\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot( data=London ) + geom_sf() + theme_bw() + \n  geom_point( data=st_centroid(London), aes( size = Density, geometry = geometry), \n              stat = \"sf_coordinates\" ) +\n  labs( x=\"Longitude\", y=\"Latitude\" ) + \n  theme( axis.title=element_text(size=15), axis.text=element_text(size=15) )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: st_centroid assumes attributes are constant over geometries\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not\ngive correct results for longitude/latitude data\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](London_files/figure-html/unnamed-chunk-7-1.png){fig-align='center' width=50%}\n:::\n:::\n\n",
    "supporting": [
      "London_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}