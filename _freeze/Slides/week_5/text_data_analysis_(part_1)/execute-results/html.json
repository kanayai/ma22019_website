{
  "hash": "d086934cddcfb9f3b78de7a9f9a19b9c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"MA22019 - Text Data Analysis (Part 1)\"\nauthor: \"Christian Rohrbeck\"\ndate: \"5 March 2025\"\n---\n\n\n\n\n::: {.cell}\n\n:::\n\n\n## Plan for Today\n\nWe start Chapter 3 on **Text Data Analysis**:\n\n- What is text data and why is it important?\n\n- Analysis of word frequency (Section 3.1)\n\n- Sentiment Analysis (Section 3.2)\n\n- Comparing term frequencies (Section 3.3.1)\n\n\n## Summary of Week 4 Feedback\n\n* 19 submissions (out of 165)\n\n* Majority of students seems happy with how the course is run\n\n* Concerns that were raised by more than one student:\n\n  + Vagueness and lack of context in the coursework\n\n  + Lack of complex examples and a fully written report\n\n  + Amount of questions on the problem sheets\n\n\n# Why analyse texts?\n\n## What is text data? \n\n![](textdata.png){#id .class width=100% height=100%}\n\n## Applications \n\n\nText data is collected widely, for instance, for\n\n* Optimizing search engines \n\n* Crime prevention\n\n* Customer service\n\n\nIn all these applications, we are interested in \n\n* The words used within the text\n\n* The intention of the text\n\n\n## Loading text data from a .txt file\n\nOne way to store text data is as .txt file.\n\nThe file \"Hesse quote.txt\" contains a short quote that we load with **readLines()**\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntext_Hesse <- readLines( \"hesse_quote.txt\" )\ntext_Hesse\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Some of us think holding on makes us strong,\"\n[2] \"but sometimes it is letting go.\"             \n```\n\n\n:::\n:::\n\n\n<span style='color: blue;'>Is this data in a useful format?</span>\n\n# Extracting text data\n\n## Transforming text data\n\nLet's define a data frame\n\n::: {.cell}\n\n```{.r .cell-code}\nquote_Hesse <- data.frame( line=1:2, text=text_Hesse )\nquote_Hesse\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  line                                         text\n1    1 Some of us think holding on makes us strong,\n2    2              but sometimes it is letting go.\n```\n\n\n:::\n:::\n\n\n<span style='color: blue;'>Does this help?</span>\n\n\n## The tidy text format I \n\n\nWe focus on analysing the individual words in a text.\n\n\n\nAs such, \n\n- each word is an individual observation\n\n- we do not care about punctuation\n\n\n\n\nWe use the **unnest_tokens()** function in the tidytext package to extract the individual words\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidytext)\nHesse_tidy <- quote_Hesse %>% unnest_tokens( word, text )\n```\n:::\n\n\n\n## The tidy text format II\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead( Hesse_tidy )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  line    word\n1    1    some\n2    1      of\n3    1      us\n4    1   think\n5    1 holding\n6    1      on\n```\n\n\n:::\n:::\n\n\nThe **<span style='color: blue;'>tidy text</span>** format propagates:\n\n- Each variable is a column: our variable of interest is **word**\n\n- Each observation is a row: we have one word per row\n\n\n# Analysis of *Jane Eyre*\n\n## Charlotte Brontë\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](CharlotteBronte.jfif){fig-align='center' width=70%}\n:::\n:::\n\n\n*Jane Eyre* is a novel that was published in 1847.\n\n\n## Loading the data \n\n\nWe download the full text from Project Gutenberg.</br> \n\n**<span style='color: blue;'>-> R Markdown file</span>**\n\n\n\nThe book has about 21,000 lines of text, and we separate them into individual words:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nJaneEyre <- JaneEyre_raw %>% unnest_tokens( word, text )\n```\n:::\n\n\nThere is some data cleaning to be done! </br> \n\n**<span style='color: blue;'>-> R Markdown file</span>**\n\n\n## Calcualting term frequency\n\nExploring the frequency of the different words in a text is a common approach in text data analysis.\n\nWe use functions in the dplyr R package for this\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nJaneEyre_Count <- JaneEyre %>% \n  count( word, sort=TRUE ) %>%\n  mutate( 'term frequency'=n/sum(n), rank=row_number() )\nslice_head( JaneEyre_Count, n=10 )\n```\n:::\n\n\n**<span style='color: blue;'>-> R Markdown file</span>**\n\n\n::: {.cell}\n\n:::\n\n\n## Illustration\n\nLet's create a plot of term frequency versus rank on log scale\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](text_data_analysis_-part_1-_files/figure-html/unnamed-chunk-10-1.png){fig-align='center' width=60%}\n:::\n:::\n\n\n<span style='color: blue;'>What do we notice?</span>\n\n\n## Zipf's Law\n\n- Relationship between rank and term frequency on logarithmic scale is close to linear \n\n- The non-linear shape in the top-left is driven by only six words. \n\n- **<span style='color: blue;'>Zipf's Law</span>** states that empirically a word’s frequency is inversely proportional to its rank.\n\n## Stop words \n\n\nThe words \"the\", \"I\" and \"and\" appear most often in *Jane Eyre*.\n\n<span style='color: blue;'>Is this information useful?</span>\n\n\n\nIt is quite common in text data analysis to specify **stop words** which are ignored in the analysis.\n\n\n\nThe tidytext package comes with its own list of stop words:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary( tidytext )\ndata( stop_words )\n```\n:::\n\n\n**<span style='color: blue;'>-> R Markdown file</span>**\n\n\n## Visualizing word frequency \n\n\nThere are two options for visualizing the most frequent words:\n\n1) <span style='color: blue;'>Bar plots</span> - good to display the actual counts\n\n2) <span style='color: blue;'>Word clouds</span> - good for many words\n\n\n\nLet's produce these plots for *Jane Eyre*</br>\n\n**<span style='color: blue;'>-> R Markdown file</span>**\n\n\n\n# Sentiment Analysis\n\n## What do we mean by sentiment?\n\nThe emotional intent of the text:\n\n- Is a text more positive or negative?\n\n- Is a review positive or negative?\n\n- How does the story evolve throughout the book?\n\n## Measuring sentiment \n\n\nWe start by assigning a sentiment to each individual word using a **<span style='color: blue;'>sentiment lexicon</span>**.\n\nThe following two lexicons are provided by tidytext:\n\n* **AFINN**: Sentiment score between -5 and +5.\n\n* **Bing**: Words are categorized as \"positive\" or \"negative\".\n\nThe sentiment of a text is then the sum (or mean) of the sentiment of the words.\n\n\n**<span style='color: blue;'>Is this a weak, moderate or strong assumption?</span>**\n\n**<span style='color: blue;'>For which pieces of text may our approach perform poorly?</span>**\n\n\n\n## Sentiment analysis for *Jane Eyre*\n\nWe already analysed word frequency for the book.\n\nLet's see what we can say about the sentiment.</br>\n\n**<span style='color: blue;'>-> R Markdown file</span>**\n\n\n## What to remember\n\nSentiment analysis assesses whether a text has a positive or negative emotional intent.\n\nWe measure sentiment via the individual words. </br> **<span style='color: blue;'>We make an assumption here!</span>**\n\n**Important:** Stop words are not removed, because they may be important.\n\n**Remark:** The relative change in sentiment is often more accurate than the actual values.\n\n\n# Comparing text documents\n\n## Motivation \n\nIn many applications we are interested in comparing two (or more) pieces of text.\n\n<span style='color: blue;'>Can you think of examples?</span>\n\nUsing the methods we introduced, we may explore two aspects:\n\n* Word frequency\n\n* Sentiment\n\n## Comparison using term frequency \n\n\nInterest in exploring two pieces of text in terms of term frequency of the individual words.\n\n\n\n<span style='color: blue;'>Why should we not compare the actual counts?</span>\n\n\n\nLet's compare the novels *Jane Eyre* and *Wuthering Heights*</br>\n\n**<span style='color: blue;'>-> R Markdown file</span>**\n\n\n",
    "supporting": [
      "text_data_analysis_-part_1-_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}