{
  "hash": "1c095d1cf2c58c45a758b598c4f541e2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Visualization (Part 2)\"\nsubtitle: \"Lecture\"\ndate: \"19 February 2025\"\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolorize <- function(x, color=\"blue\") {\n  if (knitr::is_latex_output()) {\n    sprintf(\"\\\\textcolor{%s}{%s}\", color, x)\n  } else if (knitr::is_html_output()) {\n    sprintf(\"<span style='color: %s;'>%s</span>\", color,\n      x)\n  } else x\n}\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(patchwork)\n```\n:::\n\n\n## Reminder I\n\nWe have introduced six types of plot:\n\n- Scatter plot\n\n- Line plot\n\n- Histogram / Density plot\n\n- Box / Violin plot\n\nWe create such plots in ggplot2 using the syntax\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot( data, aes(...) ) + \n  geom_...( aes(...) ) + \n  labs( x=..., y=... )\n```\n:::\n\n\n## Reminder II\n\n|Type of plot | geom_... | \n|:-------     | :------------       | \n|Scatter plot | **geom_point**      | \n|Line plot    | **geom_line**, **geom_step**       | \n|Bar plot     | **geom_bar**, **geom_col**        | \n|Histogram    | **geom_histogram**  |\n|Box plot     | **geom_boxplot**    |\n|Density plot | **geom_density**    |\n|Violin plot  | **geom_violin**     |\n\n\n## Plan for Today\n\nToday we will explore the remaining plot elements:\n\n- **Coordinate system** (Sections 2.1.3 and 2.3.1)\n\n- **Scale** and **context** (Sections 2.1.5 and 2.3.2)\n\n- Labelling and colours (Sections 2.3.3 and 2.3.4)\n\n- Changing the format of a data frame (Section 2.4)\n\nThis will complete Chapter 2 on data visualization.\n\nAt the end, I will make some announcements regarding Coursework 1.\n\n# Coordinate System\n\n## Overview \n\n\nWe have to decide which coordinate system is the most suitable for our analysis.\n\n\n\nThe three types we consider in this course are\n\n* Cartesian coordinate system\n\n* Polar coordinate system\n\n* Geographical / spatial coordinate system\n\n\nFor now, we only focus on the fist two types.\n\nThe key function to switch between types is **coord_polar()**.\n\n## Example - Wind direction at Bela Vista\n\nWe are working with:\n\n- Hourly data from Bela Vista, Brazil, for 2017 and 2018\n\n- Observations on wind direction and speed \n\nLet's explore the distribution of wind direction and its relation to wind speed.\n\n<p style=\"color:Blue\">**Which types of plot should we be using?**</p>\n\n## Pie charts \n\nIn ggplot2, we have to create a bar plot with polar coordinates\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf <- data.frame( \"prob\" = c(0.3,0.4,0.3), \"group\" = c(\"A\",\"B\",\"C\") )\nggplot( df, aes( x=\"\", y=prob, fill=group ) ) + \n  geom_col() + coord_polar( theta=\"y\" ) + labs( x=\"\", y=\"\" )\n```\n\n::: {.cell-output-display}\n![](04_data_visualization_part_2_files/figure-html/unnamed-chunk-4-1.png){fig-align='center' width=55%}\n:::\n:::\n\n\n\n\n## Summary\n\nThere are two scenarios when a polar coordinate system may be useful to consider:\n\n1) **Pie charts** </br>\nHowever, a bar plot may be better as it uses position and length as visual cues.\n\n2) To visualize variables such as **direction** or **time** \n\nBoth these aspects can be achieved using **coord_polar()** in ggplot2.\n\n\nNote from ggplot2 developers:</br>\n*\"Polar coordinates should be used with EXTREME caution because of the potential perceptual problems.\"* \n\n\n\n\n# Changing the scale\n\n## Types of scale\n\nWe deal with three types of scale:\n  \n* **Numerical:** Speed, Age, etc.\n\n* **Categorical: ** Ratings, Sites, etc. \n  \n* **Time: ** Months, Years, etc.\n\nWhen we create plots, knowing the type is important when deciding on the type of plot.\n\n\n## Changing numerical scales \n\n\n- Plots may sometimes be dominated by a couple of data points or outliers\n\n- Changing the scale may provide better insight \n\n\n\n- The function **coord_trans()** is one option to change it:\n\n    * ggplot(..) + coord_trans( x=\"log10\" ) logarithmic scale\n    \n    * ggplot(..) + coord_trans( x=\"sqrt\" ) square root scale\n\n\n## Examples\n\nLet's look at two examples:\n\n1. Body vs brain weight of mammals.\n\n2. Number of followers and likes on Facebook\n\nWe will also demonstrate how to change font sizes of labels.\n\n# Changing the colour scheme\n\n## Overview\n\nThe ggplot2 package has a default colour scheme. Here are some of the alternatives: \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npar( mai=c(0.1,0.6,0.1,0.1))\nlibrary( RColorBrewer )\ndisplay.brewer.all( colorblindFriendly = TRUE )\n```\n\n::: {.cell-output-display}\n![](04_data_visualization_part_2_files/figure-html/unnamed-chunk-5-1.png){fig-align='center' width=85%}\n:::\n:::\n\n\n## How to use these colour schemes\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nAUS <- read.csv(\"data/weatheraustralia.csv\" )\nggplot( AUS, aes( x=Location,y=WindGustSpeed ) ) +\n  geom_boxplot( aes(fill=Location) ) + \n  labs( y=\"Speed of wind gust in km/h\", fill=\"City\" ) + \n  scale_fill_brewer( palette=\"Oranges\" )\n```\n\n::: {.cell-output-display}\n![](04_data_visualization_part_2_files/figure-html/unnamed-chunk-6-1.png){fig-align='center' width=60%}\n:::\n:::\n\n\n# Changing the data struture\n\n## Switching data formats\n\n- ggplot2 is based on one variable being plotted against another\n\n- In some cases, we have to alter the data structure to create the plot we want\n\n- The **tidyr** package provides two important functions\n\n    * **pivot_wider()**\n\n    * **pivot_longer()**\n    \n    \n## Switching data formats - Example    \n    \nWe have monthly average temperature data for Manaus, Brazil \n\n* Each column refers to a month\n\n* Each row refers to a year\n\n**For which plots is this format useful?**\n\n**For which plots do we need to change the data format?**\n\n## Summary\n\nToday we\n\n- Studied the plot elements **coordinate system**, **scale** and **context**\n\n- Learned how to change the coordinate system and scale\n\n- Set axis labels, font size and colour scheme\n\n- Changed the data structure using pivot_wider() and pivot_longer\n\n- **Remember:** Plots should also help others to make meaningful comparisons\n\n\n## Coursework 1\n\n* Released at 15:00 on Friday 21 February on Moodle\n\n* Due at 17:00 on Friday 28 February\n\n* Submission via Moodle only\n\n**Support:**\n\n* Work on it in the tutorial and in your own time\n\n* Office Hour Monday 9:00-11:00\n\n* Q&A session 10:15-11:05 on Wednesday 26 February \n\n* Questions should be posted on the Padlet board\n",
    "supporting": [
      "04_data_visualization_part_2_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}