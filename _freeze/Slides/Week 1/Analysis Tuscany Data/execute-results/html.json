{
  "hash": "43f1e369d0ba52d874ae6f7c1e4f52e3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Analysis of Tuscany Data Set\"\ndate: \"05/02/2025\"\nformat: html\n---\n\n\n\n### Loading the dplyr R package and the data \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nTuscany_raw <- read.csv( \"Tuscany.csv\" )\n```\n:::\n\n\n## Task 1: Compare populations for the different provinces and towns\n\n### Explore the data and remove unncessary variables\n\nPrint first five data entries:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nslice_head( Tuscany_raw, n=5 )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Year Postal_Code  Town Province Age Men Women\n1 2020       45001 Aulla       MS   0  32    30\n2 2020       45001 Aulla       MS   1  30    34\n3 2020       45001 Aulla       MS   2  43    39\n4 2020       45001 Aulla       MS   3  50    35\n5 2020       45001 Aulla       MS   4  38    29\n```\n\n\n:::\n:::\n\n\n\n**Method 1 - keep relevant variables:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTuscany <- select( Tuscany_raw, Town:Women )\n```\n:::\n\n\n**Method 2 - remove variables which are not important for the analysis:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTuscany <- select( Tuscany_raw, -Year, -Postal_Code )\n```\n:::\n\n\n### Create a variable which represents population \n\n\n::: {.cell}\n\n```{.r .cell-code}\nTuscany <- mutate( Tuscany, Population = Men + Women )\nslice_head( Tuscany, n=5 )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Town Province Age Men Women Population\n1 Aulla       MS   0  32    30         62\n2 Aulla       MS   1  30    34         64\n3 Aulla       MS   2  43    39         82\n4 Aulla       MS   3  50    35         85\n5 Aulla       MS   4  38    29         67\n```\n\n\n:::\n:::\n\n\n### The pipe %>%\n\n**We can combine the previous commands into a single piece of code using %>%:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTuscany <- Tuscany_raw %>%\n  mutate( Population = Men + Women ) %>%\n  select( -Year, -Postal_Code )\nslice_head( Tuscany, n=5 )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Town Province Age Men Women Population\n1 Aulla       MS   0  32    30         62\n2 Aulla       MS   1  30    34         64\n3 Aulla       MS   2  43    39         82\n4 Aulla       MS   3  50    35         85\n5 Aulla       MS   4  38    29         67\n```\n\n\n:::\n:::\n\n\n### Summarizing the data\n\nWe use summarize() to extract summaries for three variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTuscany %>%\n  summarize( \"Population_Tuscany_2020\" = sum( Population ),\n             \"Men_Tuscany_2020\" = sum( Men ),\n             \"Women_Tuscany_2020\" = sum( Women ) )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Population_Tuscany_2020 Men_Tuscany_2020 Women_Tuscany_2020\n1                 3691409          1787649            1903760\n```\n\n\n:::\n:::\n\n\n### Derive the population for each province\n\nWe combine summarize() and group_by():\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTuscany_Province <- Tuscany %>%\n  group_by( Province ) %>%\n  summarize( Total = sum(Population) )\nTuscany_Province\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 2\n   Province  Total\n   <chr>     <int>\n 1 AR       336450\n 2 FI       997940\n 3 GR       217803\n 4 LI       328855\n 5 LU       383688\n 6 MS       189786\n 7 PI       417799\n 8 PO       265153\n 9 PT       290177\n10 SI       263758\n```\n\n\n:::\n:::\n\n\n\n### Sort provinces based on population\n\nWe use the arrange() function:\n\n**To sort in ascending order:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\narrange( Tuscany_Province, Total )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 2\n   Province  Total\n   <chr>     <int>\n 1 MS       189786\n 2 GR       217803\n 3 SI       263758\n 4 PO       265153\n 5 PT       290177\n 6 LI       328855\n 7 AR       336450\n 8 LU       383688\n 9 PI       417799\n10 FI       997940\n```\n\n\n:::\n:::\n\n\n**To sort in descending order:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTuscany_Province %>% arrange( desc(Total) )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 2\n   Province  Total\n   <chr>     <int>\n 1 FI       997940\n 2 PI       417799\n 3 LU       383688\n 4 AR       336450\n 5 LI       328855\n 6 PT       290177\n 7 PO       265153\n 8 SI       263758\n 9 GR       217803\n10 MS       189786\n```\n\n\n:::\n:::\n\n\n\n## Task 2: Explore age profile of the population\n\nExtract proportion of women at various ages:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTuscany_Women_Age <- Tuscany %>%\n  group_by( Age ) %>%\n  summarize( Number = sum(Women) ) %>%\n  mutate( Proportion = Number / sum(Number) )\n```\n:::\n\n\nVisualize the proportions:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbarplot( Proportion~Age, data=Tuscany_Women_Age )\n```\n\n::: {.cell-output-display}\n![](Analysis-Tuscany-Data_files/figure-html/unnamed-chunk-12-1.png){fig-align='center' width=70%}\n:::\n:::\n\n",
    "supporting": [
      "Analysis-Tuscany-Data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}