---
title: "MA22019 2025 - Solutions for Computer Lab 1"
author: "RStudio and R Markdown"
output:
  html_document: default
  word_document: default
  pdf_document: default
fontsize: 12pt
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### **Overview**

This week's tutorial questions revise some fundamentals of the R programming language. You will further learn how to produce a PDF/HTML file using R Markdown. Note, you will be required to use R Markdown for the coursework. 

If you are using your own laptop, you want to first run the code in "InstallPackages.R" (available from Moodle) to install all the packages essential for this course.


### **Tutorial Question 1 - Creating and editing an R Markdown file**

R Markdown allows us to produce a document that includes all the R code, plots and accompanying text of our analysis - you will have to use R Markdown for the assessed coursework. After completing the following tasks, you will have created your first R Markdown file and added some text and R code to it:

a) Create an R Markdown file in RStudio: 

    1) Go to **File** -> **New File** and then click **R Markdown**. 
    
    2) Select any output option and provide a title and author (both can be changed later). Click **Continue** at the bottom of the window. This should load an R Markdown file with some material already added to it.

b) Save the file in a directory on your OneDrive. Then click the **Knit** button (the ball of yarn and needle) to compile the document into a PDF/Word/HTML document. After a few seconds, you should see a pop-up window with the produced document. If you are using your own laptop, you may first need to install a version of LaTeX using the following code:  
```{r, eval=FALSE}
    install.packages( "tinytex", dependencies = TRUE )
    tinytex::install_tinytex()
```

c) Have a look at the document "Editing the R Markdown file" on Moodle. Then edit, and ultimately knit, your R Markdown file such that it includes

    1) An R chunk which samples 10,000 observations from a $\mathrm{Normal}(\mu=5,~\sigma^2=4)$ distribution and stores the samples in a vector **y**. 
    
    <p style="color:blue">*We use the function rnorm() to generate the sample. We have to remember that rnorm() works with the standard deviation and not the variance:*</p>
    
    ```{r}
      y <- rnorm( n=10000, mean=5, sd=2 )
    ```
    
    2) Write a second R chunk which extracts the minimum and maximum value in **y**. You may want to consider using the functions min() and max().
    
    <p style="color:blue">*We can directly apply the functions min() and max()*:</p>
    
    ```{r}
      min( y ) 
      max( y )
    ```
    
    3) Write a third R chunk which creates a histogram of the data in $y$. Your plot should be centred and be 60% of the text width.

    <p style="color:blue">*You saw the function hist() in Year 1 Probability & Statistics to generate a histogram. We also need to specify suitable axis labels, and we set the options for the width and position of the plot:*</p>

    ```{r, fig.align='center', out.width='60%'}
      hist( y, xlab="Value", ylab="Frequency" )
    ```

    4) Some text before each R chunk to describe what the different R chunks are doing.


### **Tutorial Question 2 - Tuition fees in the United States**

We are interested in exploring how tuition fees for private college have evolved across the United States between 2013 and 2020. For the analysis we will consider data collected by the National Center of Education Statistics (NCES). 

The file "Private College Costs.csv" gives for each U.S. state (except Wyoming) the average annual tuition fee (in U.S. Dollars) charged to full-time students enrolled across private colleges located in each of the U.S. states for 2013--2020. We can load the data file into R using 

```{r}
Fees <- read.csv( "Private College Costs.csv" )
```

Note, the data file needs to be in the same folder as the R Markdown file. Use the data to address the following questions:

a) Create a plot which visualises the recorded average fee for the years 2013--2020 for the state of Alabama. What can we conclude from the plot?  

<p style="color:blue">*When we look at the data, we find that first row corresponds to the state of Alabama, and we want to plot all values in the row (except for the state name). Using the syntax for accessing entries of a matrix, we can plot the data for Alabama using*</p>

```{r, fig.align='center', out.width='60%', fig.height=4, fig.width=6}
plot( 2013:2020, Fees[1,-1], xlab="Year", ylab="Average Fee" )
```

<p style="color:blue">*The plot shows that the average tuition fee has increased year-on-year, from about \$14,000 in 2013 to more than \$16,500 in 2020.*</p>

b) For each state, calculate the relative relative change in tuition fees when comparing the value for the years 2013 and 2020. Provide a histogram which visualises the calculated values.

<p style="color:blue">*We first calculate the relative change. To do this, we can either again use the syntax for matrices or directly the names of the columns:*</p>

```{r}
Rel_Change_Fees <- Fees$X2020 / Fees$X2013
```

<p style="color:blue">*We then use the function hist() to create the histogram:*</p>

```{r, fig.align='center', out.width='60%'}
hist( Rel_Change_Fees, xlab="Relative Change", breaks = 10, 
      main = "Relative change in tuition fees for US states")
```

c) Which state has recorded the highest relative increase in average tuition fees for private universities when comparing 2013 and 2020?

<p style="color:blue">*We can either try to look it up in the data table, or directly extract it using the following R code:*</p>

```{r}
max( Rel_Change_Fees )
Fees$State[ which.max(Rel_Change_Fees) ]
```

<p style="color:blue">*We find that Iowa has seen the largest relative increase, with the average tuition fees for private colleges having more than doubled in the state.*</p>


d) Discuss whether the data may be used to derive the average increase in tuition fees across all private US colleges from 2013 to 2020.

<p style="color:blue">*We only have the average for each state, but the data does not provide the number of private colleges per state. As such, the values provided in the data file are not enough to make a statement on the average increase across the whole U.S.*</p>
<p style="color:blue">*One may argue that there is sufficient evidence to at least conclude that the average tuition fee is higher in 2020 than in 2013, since there are only 3 states for which the relative change in fees is smaller than 1.*</p>